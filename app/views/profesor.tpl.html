<md-toolbar layout-fill>
  <div layout-fill layout="row" layout-align="center center" class="md-toolbar-tools">
    <md-input-container layout-fill md-no-float class="md-block big-search">
      <ng-md-icon icon="search"></ng-md-icon>
      <input ng-model="ProfesorsCtrl.query.name" type="search" placeholder="Buscar Profesor...">
    </md-input-container>
    <md-button ng-click="ProfesorsCtrl.query = {}" aria-label="Reiniciar Busqueda" class="md-icon-button clear-search">
      <ng-md-icon flex icon="close"></ng-md-icon>
    </md-button>
  </div>
</md-toolbar>
<md-content class="md-padding" layout-xs="column" layout="row">
  <section flex="45" layout="column" style="overflow:hidden;height:50vh">
    <md-toolbar md-scroll-shrink class="md-accent md-hue-3">
      <md-list flex>
        <div class="md-toolbar-tools">
          <span flex>Listado de Profesores</span>
          <md-button class="md-icon-button" ng-click="ProfesorsCtrl.addPlace($event)" aria-label="Agregar Lugar">
            <ng-md-icon icon="add"></ng-md-icon>
          </md-button>
        </div>
    </md-toolbar>
    <md-content flex>
      <md-list>
        <md-list-item ng-click="ProfesorsCtrl.selectPlace(profesor.$id)" ng-repeat="profesor in ProfesorsCtrl.profesors | filter: ProfesorsCtrl.query | orderBy: 'name'">
          <ng-md-icon icon="school" class="avatar"></ng-md-icon>
          <p>{{profesor.name + ' ' + profesor.lastname}}, {{profesor.secciones.length}} secci{{profesor.secciones.length > 1 ? 'ones' : 'ón'}}</p>
          <ng-md-icon icon="delete" ng-click="ProfesorsCtrl.deleteProfesor(profesor.$id)" aria-label="Eliminar Profesor" class="md-secondary md-warn"></ng-md-icon>
        </md-list-item>
      </md-list>
    </md-content>
  </section>
  <div layout-fill flex="45" flex-offset="5">
    <form name="ProfesorsCtrl.profesorForm" ng-submit="ProfesorsCtrl.changeMode()" class="md-padding">
      <h3 class="md-subhead">Informacion Del Profesor</h3>
      <md-card>
        <md-card-title>
          <md-card-title-text>
            <div layout="row">
              <md-input-container md-no-float class="md-block md-headline special-case">
                <input type="text" name="nombreDelProfesor" ng-model="ProfesorsCtrl.currentProfesor.name" required md-minlength="6" minlength="6" placeholder="Nombre" ng-disabled="!ProfesorsCtrl.editing">
                <div ng-messages="ProfesorsCtrl.profesorForm.nombreDelProfesor.$error">
                  <div ng-message="minlength">El nombre debe tener 6 cáracteres minimo</div>
                </div>
              </md-input-container>
              <md-input-container md-no-float class="md-block md-headline special-case">
                <input type="text" name="apellidoDelProfesor" ng-model="ProfesorsCtrl.currentProfesor.lastname" required md-minlength="6" minlength="6" placeholder="Apellido del Profesor" ng-disabled="!ProfesorsCtrl.editing">
                <div ng-messages="ProfesorsCtrl.profesorForm.apellidoDelProfesor.$error">
                  <div ng-message="minlength">El nombre debe tener 6 cáracteres minimo</div>
                </div>
              </md-input-container>
            </div>
            <div layout="row" class="md-subhead">
              <md-input-container md-no-float class="md-block special-case">
                <ng-md-icon icon="school"></ng-md-icon>
                <input type="text" name="cedulaDelProfesor" ng-model="ProfesorsCtrl.currentProfesor.cedula" required md-minlength="11" minlength="11" md-maxlength="11" maxlength="11" placeholder="Cedula" ng-disabled="!ProfesorsCtrl.editing">
                <div ng-messages="ProfesorsCtrl.profesorForm.cedulaDelProfesor.$error">
                  <div ng-message="minlength">Use cifras de 2 digitos</div>
                  <div ng-message="pattern">El campo es solo numerico.</div>
                </div>
              </md-input-container>
            </div>
          </md-card-title-text>
        </md-card-title>
        <md-card-actions layout="row" layout-align="start center">
          <small flex ng-if="ProfesorsCtrl.currentProfesor.creatorFullName">Creado Por: <em>{{ProfesorsCtrl.currentProfesor.creatorFullName}}</em></small>
          <md-button aria-label="{{ProfesorsCtrl.modeCancelMessage}} Lugar" ng-click="ProfesorsCtrl.cancelMode()" class="md-warn md-icon-button" ng-disabled="!(ProfesorsCtrl.currentProfesor.capacity || ProfesorsCtrl.editing)">
            <md-tooltip md-direction="top">
              {{ProfesorsCtrl.modeCancelMessage}}
            </md-tooltip>
            <ng-md-icon icon="{{ProfesorsCtrl.currentCancelIcon}}" class="md-warn"></ng-md-icon>
          </md-button>
          <md-button aria-label="{{ProfesorsCtrl.modeSaveMessage}} Lugar" class="md-icon-button md-primary" type="submit" ng-disabled="!(ProfesorsCtrl.currentProfesor && !ProfesorsCtrl.profesorForm.$invalid || ProfesorsCtrl.editing)">
            <md-tooltip md-direction="top">
              {{ProfesorsCtrl.modeSaveMessage}}
            </md-tooltip>
            <ng-md-icon icon="{{ProfesorsCtrl.currentSaveIcon}}" options='{"duration": 375}' class="md-primary"></ng-md-icon>
          </md-button>
          </md-button>
        </md-card-actions>
      </md-card>
    </form>
  </div>
</md-content>
